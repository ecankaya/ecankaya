CREATE OR REPLACE VIEW vw_artikel(artikel_id,name,preis,größe) AS SELECT artikel.artikel_id,name,preis,größe FROM artikel,getränk where artikel.artikel_id = getränk.artikel_id;

--Test insert (negativ)
insert into vw_artikel values (4,'tea',1.99,'S');


CREATE OR REPLACE TRIGGER trg_insert_artikel 
    INSTEAD OF INSERT ON vw_artikel
    FOR EACH ROW 
BEGIN
    INSERT INTO artikel (artikel_id,Name ,Preis,typ)
    VALUES(:NEW.Artikel_ID,:NEW.Name, :NEW.Preis,'G');   
    INSERT INTO getränk (artikel_id,eis,größe)
    VALUES(:NEW.Artikel_ID,NULL,:NEW.GRÖße);  
END;
/
--Test insert (positiv)
insert into vw_artikel values (4,'tea',1.99,'S');

--Test delete (negativ)
DELETE FROM vw_artikel where artikel_id = 1;

CREATE OR REPLACE TRIGGER trg_delete_artikel 
    INSTEAD OF DELETE ON vw_artikel
    FOR EACH ROW 
BEGIN
    DELETE FROM getränk WHERE artikel_id = :OLD.artikel_id;
    DELETE FROM ARTIKEL WHERE artikel_id = :OLD.artikel_id;
END;
/
--Test delete (positiv)
DELETE FROM vw_artikel where artikel_id = 1;

--Test update(negativ)
UPDATE vw_artikel SET name = 'cola',preis = 3.99, größe='L' where artikel_id = 3;

CREATE OR REPLACE TRIGGER trg_update_artikel 
    INSTEAD OF UPDATE ON vw_artikel
    FOR EACH ROW 
BEGIN
    UPDATE artikel SET Name = :NEW.name ,Preis = :NEW.preis 
    WHERE ARTIKEL_ID = :OLD.Artikel_id;
    UPDATE getränk SET größe = :NEW.GRÖßE
    WHERE ARTIKEL_ID = :OLD.Artikel_id;
END;
/
--Test update(positiv)
UPDATE vw_artikel SET name = 'cola',preis = 3.99, größe='L' where artikel_id = 3;